{% extends "base.html" %}

{% block title %}Nová objednávka{% endblock %}

{% block content %}
<div class="auth-container" style="max-width: 600px;">
    <h2>Nová objednávka</h2>

    <form method="post">
        <label for="datum">Datum a čas:</label>
        <input type="datetime-local" id="datum" name="datum" required>

        <label for="znacka">Značka auta:</label>
        <input type="text" id="znacka" name="znacka" required>

        <label for="poznamka">Poznámka:</label>
        <textarea id="poznamka" name="poznamka" rows="3"></textarea>

        <label>Požadované práce:</label>
        <div id="prace-container">
            <div class="prace-row">
                <select name="id_prace" required>
                    <option value="" disabled selected>-- Vyberte práci --</option>
                    {% for p in prace %}
                        <option value="{{ p.ID_prace }}">{{ p.nazev_prace }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <button type="button" id="btn-pridat" class="btn btn-secondary btn-small mb-2">
            + Přidat další práci
        </button>

        <button type="submit" class="btn-block btn-success">Vytvořit objednávku</button>
    </form>
</div>

<script>
    document.getElementById('btn-pridat').addEventListener('click', function() {
        const container = document.getElementById('prace-container');
        const firstRow = container.querySelector('.prace-row');
        const newRow = firstRow.cloneNode(true);
        const select = newRow.querySelector('select');
        select.value = ""; 
        newRow.classList.add('mt-2'); // Použití třídy místo inline stylu
        container.appendChild(newRow);
    });
</script>
{% endblock %}